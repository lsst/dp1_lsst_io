.. _api-101-1:

#####################################
101.1. How to get started with TOPCAT
#####################################

For the API Aspect of the Rubin Science Platform at data.lsst.cloud.

**Data Release:** DP1

**Last verified to run:** 2025-06-06

**Learning objective:** This tutorial provides a basic guide to set up `TOPCAT <http://www.star.bris.ac.uk/~mbt/topcat/>`_ to explore the DP1 tables via the Rubin Science Platform (RSP) Table Access Protocol (TAP) service.

**LSST data products:** The DP1 catalogs within the RSP TAP service.

**Credit:** Based on tutorials developed by the Rubin Community Science team. Please consider acknowledging them if this tutorial is used for the preparation of journal articles, software releases, or other tutorials.

**Get Support:** Everyone is encouraged to ask questions or raise issues in the `Support Category <https://community.lsst.org/c/support/6>`_ of the Rubin Community Forum. Rubin staff will respond to all questions posted there.

*How-to tutorials should NOT need sections, and have a minimal number of very concise steps. How-tos should NOT have an introduction as this is covered by the learning objective above.*

*Like the notebook template, italicized text should be removed or replaced.*


Get started with TOPCAT
-----------------------

**1. Create an RSP access token.**  
See the `Creating user tokens webpage <https://rsp.lsst.io/guides/auth/creating-user-tokens.html>`_ 
for a step-by-step guide for creating an RSP access token.  It is recommended that the token you create has the
following propoerties:  a name that includes "TOPCAT" as a substring, a scope of ``read:tap``, 
and no expiration date.) The token will only be visible once.
*You must cut-and-paste the token to a secure file for future use.*
A new token is not needed for every TOPCAT session; the token can be reused, but it must be kept secure.

.. Important::
    **Note that tokens should be treated like passwords:  they should not be shared with others.  
    Take precautions to keep tokens secure.  Never store tokens in git-tracked files.**
  
**2. Start up TOPCAT on your own computer.**
See `TOPCAT homepage <http://www.star.bris.ac.uk/~mbt/topcat/>`_ for download and install instructions.

**3. Click on "Table Access Protocol (TAP) Query" under the “VO” menu.**
This will open up a separate Table Access Protocol (TAP) Query window. 

.. figure:: images/api-101-1-1.png
    :name: api-101-1-1
    :alt: A screenshot of the main TOPCAT window with the Table Access Protocol item 
	  highlighted by the cursor under the VO drop-down menu.

    The main TOPCAT window, with the "VO" menu pulled down and the "Table Access Protocol (TAP) Query" highlighted.

**4. Fill in the relevant in the “TAP URL” window and click the “Use Service” button in the Table Access Protocol (TAP) Query window.**
For DP1, use ``https://data.lsst.cloud/api/tap``.  

.. figure:: images/api-101-1-2.png
    :name: api-101-1-2
    :alt: A screenshot of the the Table Access Protocol (TAP) Query window in which the value
          for the TAP URL has been filled in with the URL
	  https://data.lsst.cloud/api/tap .  A blue oval indicates the location of the 
          Selected TAP Service panel in the window.

    The Table Access Protocol (TAP) Query window with the location of the "Selected TAP Service" panel indicated by a blue oval.

**5. Populate the Authentication window that pops up.**  
Fill in ``x-oauth-basic`` for the "User" and your security token forthe "Password" and click "OK".

.. figure:: images/api-101-1-3.png
    :name: api-101-1-3
    :alt: A screenshot of the Authentication window. The user has been filled in with a value of x-oauth-basic, 
	  and the password is shown (for security purposes) as a series of filled black circles.

    The Authentication window with the values for the user and the password filled in.

**6. Note that the RSP TAP service is now accessible from your instance of TOPCAT.**  
An indicator that the service is now accessible is that a list of DP1 tables available has appeared in the Metadata panel of the TAP Query window.

.. figure:: images/api-101-1-4.png
    :name: api-101-1-4
    :alt: A screenshot of the Table Access Protocol (TAP) Query window.
          The Table Access Protocol (TAP) Query window now shows three panels, stacked vertically.  The
	  top panel is the Metadata panel, and it shows a list of DP1 schemas and tables that
	  are available to query.  The middle panel is the Service Capabilities panel, and it shows that
	  the available Query Language is ADQL-2.0.  The bottom panel is the ADQL Text panel, and it 
	  indicates the current Mode is Synchronous; the bottom panels text box is currently empty.

    The Table Access Protocol (TAP) Query window; a list of DP1 tables 
    available for query can be be seen in the Metadata panel.

**7. Explore.**
At this stage, the Rubin DP1 data set can be explored via TOPCAT.  For an example, see the 
:doc:`/tutorials-examples/api-topcat-beginner`.

